{% load static %}
<head>

    <meta charset ="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title> iCast </title> 

    <link rel="stylesheet" type="text/css" href="https://bootswatch.com/5/flatly/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="{%static 'css/style.css'}"> 
</head>

<body>
   
    <h1>Manage Election</h1>
    {% if current_election %}
    <h1>Current Election: {{ current_election.name }}</h1>
    <!-- If the current election is active, show a stop button -->
    {% if current_election.is_active %}
        <button onclick="window.location.href='{% url 'stop_election' current_election.id %}'">Stop Election</button>
    {% endif %}
    {% else %}
    <h1>No Active Election</h1>
    <button id="startElectionButton">Create Election</button>
    <div id="electionFormContainer" style="display: none;">
        <form method="post" action="{% url 'manage_election' %}">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">Start Election</button>
        </form>
    </div>
    {% endif %}
    <script type="text/JavaScript">
        // JavaScript to handle showing the new election form
        document.getElementById('startElectionButton').addEventListener('click', function() {
            var formContainer = document.getElementById('electionFormContainer');
            formContainer.style.display = 'block'; // Show the form
        });
    
        // If there is an active election, add a listener to the stop button
        {% if current_election.is_active %}
        document.getElementById('stopElectionButton').addEventListener('click', function() {
            var confirmStop = confirm("Are you sure you want to stop the election?");
            if (confirmStop) {
                window.location.href = "{% url 'stop_election' current_election.id %}";
            }
        });
        {% endif %}
    </script>
</body>