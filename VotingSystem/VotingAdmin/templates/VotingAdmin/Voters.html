{% load custom_filters %}
{% load static %}
<head>

    <meta charset ="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title> iCast </title> 

    <link rel="stylesheet" type="text/css" href="https://bootswatch.com/5/flatly/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="{%static 'css/style.css'}"> 
</head>

<body>
<h1>Manage Voters</h1>
<hr>

<!-- Your existing table structure -->
<table class="table table-hover table-bordered">
    <thead class="table-light">
      <tr>
        {% for field_name in field_names %}
          <th>{{ field_name|capfirst }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for voter in voters_data %}
        <tr>
          {% for field_name in field_names %}
            <!-- Use the custom get_item filter to safely access the value -->
            <td>{{ voter|get_item:field_name }}</td>
          {% endfor %}
        </tr>
      {% endfor %}
    </tbody>
</table>
    <div>
       
        <form method="post" enctype="multipart/form-data" action="{% url 'Upload_CSV' %}">
            {% csrf_token %}
            <label for="file">Import CSV File:</label>
            <input type="file" name="file" id="file" accept=".csv" required>
            <button type="submit">Upload CSV</button>
        </form>
    </div>
</body>