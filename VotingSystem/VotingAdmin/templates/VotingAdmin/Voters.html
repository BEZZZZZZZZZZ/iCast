{% load custom_filters %}
{% load static %}
<head>

    <meta charset ="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title> iCast </title> 

    <link rel="stylesheet" type="text/css" href="https://bootswatch.com/5/flatly/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="{%static 'css/style.css'}"> 
</head>

<body>
<h1>Manage Voters</h1>
<hr>
{% if csv_data and field_names %}
    <table border="1">
        <thead>
            <tr>
                {% for field_name in field_names %}
                    <th>{{ field_name }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for object in csv_data %}
                <tr>
                    {% for field_name in field_names %}
                        <td>{{ object|get_field_value:field_name }}</td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No data available to display.</p>
{% endif %}
    <div>
       
        <form method="post" enctype="multipart/form-data" action="{% url 'Upload_CSV' %}">
            {% csrf_token %}
            <label for="file">Import CSV File:</label>
            <input type="file" name="file" id="file" accept=".csv" required>
            <button type="submit">Upload CSV</button>
        </form>
    </div>
</body>