{% extends '../base/Admin_base.html' %}
{% load static %}

{% block content %}
<head>
    <style>
        .results-container {
            margin-top: 100px;
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-start; /* Aligns containers to the start */
            gap: 20px; /* Space between tables */
            padding: 20px;
        }
      
        .position-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 20px;
            /* Set the basis for each position container to 1 to allow equal sharing of the space */
            flex: 1;
            /* Minimum width for each container */
            min-width: 600px;
            /* Maximum width for each container, you can adjust this value based on your layout */
            max-width: calc(50% - 20px); 
        }
      
        table {
            width: 100%;
            border-collapse: collapse;
        }
      
        th, td {
            border: 1px solid #ddd;
            text-align: center;
            padding: 8px;
        }
      
        th {
            background-color: #2B2A4C;;
            color: white;
            text-align: center;
        }
      
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        h1  {
            color: black;
            padding: 20px 0px 0px 20px;
        }
       
        h2 {
            padding: 10px 20px;
            margin: 0;
            background-color: #2B2A4C;
            color: white;
            text-align: center;
        }
      
        @media (max-width: 768px) {
            .position-container {
                /* On smaller screens, let each container take full width */
                max-width: 100%;
            }
        }
      </style>
</head>
<body>

    <h1> Voting Results Tally</h1>
    <div id="results" class="results-container">
        <!-- The tables generated by JavaScript will go here -->
    </div>
    <!-- Your existing HTML content -->

    <!-- JavaScript to process and display the data -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
    // Parse the JSON data
    var positionsData = JSON.parse('{{ positions_data|safe }}');

    // Reference to the div where tables will be added
    var resultsDiv = document.getElementById('results');

    positionsData.forEach(function(position) {
        // Create a container for each position
        var positionContainer = document.createElement('div');
        positionContainer.className = 'position-container';

        // Create a title for the position
        var title = document.createElement('h2');
        title.textContent = position.position_name;
        positionContainer.appendChild(title);

        // Create a table for the position
        var table = document.createElement('table');
        var headerRow = table.insertRow();
        headerRow.innerHTML = `<th>Candidate Name</th><th>Votes</th>`;

        position.candidates.forEach(function(candidate) {
            var row = table.insertRow();
            row.innerHTML = `<td>${candidate.name}</td><td>${candidate.votes}</td>`;
        });

        // Append the table to the position container
        positionContainer.appendChild(table);

        // Append the position container to the results div
        resultsDiv.appendChild(positionContainer);
    });
});
    </script>
</body>
{% endblock %}